@inject NavigationManager Navigation

<nav class="bottom-nav">
    <a class="nav-item @(IsActive("/calendar") ? "active" : "")" href="/calendar">
        <span class="nav-icon">&#128197;</span>
        <span class="nav-label">Calendar</span>
    </a>
    <a class="nav-item @(IsActive("/grocery") ? "active" : "")" href="/grocery">
        <span class="nav-icon">&#128722;</span>
        <span class="nav-label">Grocery</span>
    </a>
    <a class="nav-item @(IsActive("/settings") ? "active" : "")" href="/settings">
        <span class="nav-icon">&#9881;</span>
        <span class="nav-label">Settings</span>
    </a>
</nav>

@code {
    private string _currentUrl = string.Empty;

    protected override void OnInitialized()
    {
        _currentUrl = Navigation.Uri;
        Navigation.LocationChanged += (_, e) =>
        {
            _currentUrl = e.Location;
            StateHasChanged();
        };
    }

    private bool IsActive(string path)
    {
        var relative = Navigation.ToBaseRelativePath(_currentUrl);
        return relative.StartsWith(path.TrimStart('/'), StringComparison.OrdinalIgnoreCase)
            || (path == "/calendar" && string.IsNullOrEmpty(relative));
    }
}
